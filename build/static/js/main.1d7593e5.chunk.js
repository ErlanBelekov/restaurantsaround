(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{124:function(t,e,a){},125:function(t,e,a){},130:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),c=a(24),s=a.n(c);a(62),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=a(54),i=a(18),u=a(13),l=a(14),p=a(16),h=a(15),f=a(17),d=a(27),m=a(1),y=a.n(m),b=a(9),E=a(26),g=a.n(E),v=a(50),w=a.n(v),x=(a(81),function(){return{type:"SEARCH_BEGIN"}}),j=function(){return{type:"SEARCH_END"}},O=function(t){return{type:"RESULTS_FETCHED",payload:t}},k=function(){return{type:"REFRESH_FETCHED"}},R=function(t){return{type:"RESULTS_FETCH_ERROR",payload:t}},C=a(19),S=a(51),N=a(21),_={searching:!1},H={results:[],fetched:!1,city:""},T=Object(C.c)({searchReducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_;switch((arguments.length>1?arguments[1]:void 0).type){case"SEARCH_BEGIN":return Object(N.a)({},t,{searching:!0});case"SEARCH_END":return Object(N.a)({},t,{searching:!1});default:return t}},resultsReducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"RESULTS_FETCHED":return Object(N.a)({},t,{results:e.payload,fetched:!0});case"REFRESH_FETCHED":return Object(N.a)({},t,{results:[],fetched:!1});case"RESULTS_FETCH_ERROR":return Object(N.a)({},t);default:return t}}}),L=Object(C.d)(T,Object(C.a)(S.a)),F=a(22),I=a(53),A=a(34),B=function(t){return r.a.createElement(A.Spring,{from:{opacity:0},to:{opacity:1}},function(e){return r.a.createElement("div",{style:e},t.children)})},D="https://developers.zomato.com/api/v2.1/",G="https://ipapi.co",M="https://api.ipify.org?format=json",U=function(t){function e(){var t,a;Object(u.a)(this,e);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(r)))).state={expand:!1,city:"",ip:"",myCity:"",myCountry:"",lat:"",lon:"",error:null},a.toggle=Object(b.a)(y.a.mark(function t(){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a,t.next=3,"";case 3:return t.t1=t.sent,t.next=6,!a.state.expand;case 6:t.t2=t.sent,t.t3={city:t.t1,expand:t.t2,error:null},t.t0.setState.call(t.t0,t.t3),a.state.expand?a.input.focus():console.log("yikes");case 10:case"end":return t.stop()}},t)})),a.handleChange=function(t){a.setState(Object(d.a)({},t.target.name,t.target.value))},a.getInputRef=function(t){a.input=t},a.getGeo=function(){var t=Object(b.a)(y.a.mark(function t(e){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.get("https://api.opencagedata.com/geocode/v1/json?q=".concat(e,"&key=11aea3522f8f433187c8ef0b28b1216f")).then(function(){var t=Object(b.a)(y.a.mark(function t(e){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.data.results.length>0)){t.next=10;break}return t.t0=a,t.next=4,e.data.results[0].geometry.lat;case 4:return t.t1=t.sent,t.next=7,e.data.results[0].geometry.lng;case 7:t.t2=t.sent,t.t3={lat:t.t1,lon:t.t2},t.t0.setState.call(t.t0,t.t3);case 10:return t.abrupt("return");case 11:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),a.search=Object(b.a)(y.a.mark(function t(){var e,n;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.dispatch(x());case 2:return t.next=4,L.dispatch(k());case 4:return t.t0=a,t.next=7,null;case 7:if(t.t1=t.sent,t.t2={error:t.t1},t.t0.setState.call(t.t0,t.t2),""===a.state.city){t.next=13;break}return t.next=13,a.getGeo(a.state.city);case 13:if(""!==a.state.city){t.next=16;break}return t.next=16,a.loadMyLocation();case 16:return e=D+"geocode?lat=".concat(a.state.lat,"&lon=").concat(a.state.lon),n={headers:{Accept:"application/json","user-key":"e688e4d8e1d70113d5723dcb5a2f514d"}},t.next=20,g.a.get(e,n).then(function(){var t=Object(b.a)(y.a.mark(function t(e){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.dispatch(O(e.data.nearby_restaurants));case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(){var t=Object(b.a)(y.a.mark(function t(e){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""===a.state.city){t.next=3;break}return a.setState({error:"Looks like ".concat(a.state.city," city is not supported yet. Try another city.")}),t.abrupt("return");case 3:return a.setState({error:"Seems like ".concat(a.state.myCity," city is not supported yet ;(. Try another city.")}),t.next=6,L.dispatch(R(e));case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 20:return t.next=22,L.dispatch(j());case 22:case"end":return t.stop()}},t)})),a.loadMyLocation=Object(b.a)(y.a.mark(function t(){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.get(G+"/".concat(a.state.ip,"/json/")).then(function(){var t=Object(b.a)(y.a.mark(function t(e){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a,t.next=3,e.data.city;case 3:return t.t1=t.sent,t.next=6,e.data.country_name;case 6:return t.t2=t.sent,t.next=9,e.data.latitude;case 9:return t.t3=t.sent,t.next=12,e.data.longitude;case 12:t.t4=t.sent,t.t5={myCity:t.t1,myCountry:t.t2,lat:t.t3,lon:t.t4},t.t0.setState.call(t.t0,t.t5);case 15:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){throw new Error("unable to fetch data about your location: ",t)});case 2:case"end":return t.stop()}},t)})),a.getIP=Object(b.a)(y.a.mark(function t(){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.get(M).then(function(){var t=Object(b.a)(y.a.mark(function t(e){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a,t.next=3,e.data.ip;case 3:t.t1=t.sent,t.t2={ip:t.t1},t.t0.setState.call(t.t0,t.t2);case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){throw new Error("unable to fetch IP: ",t)});case 2:case"end":return t.stop()}},t)})),a}return Object(f.a)(e,t),Object(l.a)(e,[{key:"componentWillMount",value:function(){var t=Object(b.a)(y.a.mark(function t(){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getIP();case 2:return t.next=4,this.loadMyLocation();case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"container".concat(this.props.fetched?"-less":"")},r.a.createElement(B,null,r.a.createElement("h1",{className:"white home-title"},"Search for restaurants. Anywhere.")),r.a.createElement("div",{className:"search-contain"},r.a.createElement("img",{src:w.a,alt:"search button icon",onClick:this.toggle,id:"search-btn"}),r.a.createElement("input",{value:this.state.city,name:"city",autoComplete:"off",onChange:this.handleChange,ref:this.getInputRef,className:this.state.expand?"wide":"",type:"text",id:"search",placeholder:this.state.expand?"Enter city name":""}),r.a.createElement("div",{className:"bottom"},r.a.createElement("p",{className:this.state.expand?"tip-show":"tip-hide",id:"tip"},"By default, we will look for restaurants near you."),r.a.createElement("p",{id:"tip",onClick:this.search,className:this.state.expand?"tip-show search":"search tip-hide"},"Search"))),r.a.createElement("p",{className:"error".concat(this.state.error?"-show":"")},this.state.error),r.a.createElement("div",{className:"searching".concat(this.props.searching?"-show":"")},r.a.createElement(I.ClipLoader,{color:"rgb(131, 185, 202)"})))}}]),e}(n.Component),W=Object(F.b)(function(t){return{searching:t.searchReducer.searching,fetched:t.resultsReducer.fetched}})(U),P=(a(124),a(125),function(t){return r.a.createElement("a",{href:t.to,className:"restaurant"},r.a.createElement("div",{className:"r-image-wrapper"},r.a.createElement("img",{className:"r-image",src:t.img,alt:""})),r.a.createElement("p",{className:"r-name"},t.name))}),J=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(f.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{className:"results".concat(this.props.fetched?"-show":"")},this.props.fetched?r.a.createElement("h1",{className:"results-title"},"Top Results: "):null,r.a.createElement("div",{className:"results-content"},this.props.results.map(function(t){return r.a.createElement(B,{key:t.restaurant.id},r.a.createElement(P,{to:t.restaurant.url,img:t.restaurant.featured_image||t.restaurant.thumb||t.restaurant.photos_url,name:t.restaurant.name}))})))}}]),e}(n.Component),q=Object(F.b)(function(t){return{searching:t.searchReducer.searching,fetched:t.resultsReducer.fetched,results:t.resultsReducer.results}})(J),z=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(f.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(W,null),r.a.createElement(q,null))}}]),e}(n.Component),$=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(f.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{className:"global-wrapper center"},r.a.createElement("img",{src:"https://image.flaticon.com/icons/svg/1594/1594214.svg",className:"not-found-icon",alt:""}),r.a.createElement("h1",{className:"not-found-title"},"Whoopsie! Couldn't find this page ;("),r.a.createElement("a",{href:"/restaurantsaround",className:"back-home"},"Back Home"))}}]),e}(n.Component);console.log("yay"),s.a.render(r.a.createElement(F.a,{store:L},r.a.createElement(o.a,{basename:"/restaurantsaround"},r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/",component:z}),r.a.createElement(i.a,{component:$})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},50:function(t,e,a){t.exports=a.p+"static/media/search_icon.64dee739.svg"},57:function(t,e,a){t.exports=a(130)},62:function(t,e,a){},81:function(t,e,a){}},[[57,1,2]]]);
//# sourceMappingURL=main.1d7593e5.chunk.js.map