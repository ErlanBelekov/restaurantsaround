(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{122:function(e,t,a){},123:function(e,t,a){},125:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(24),s=a.n(c);a(59),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=a(52),i=a(19),u=a(14),l=a(15),p=a(17),h=a(16),d=a(18),m=a(27),f=a(5),y=a.n(f),E=a(13),b=a(29),g=a.n(b),v=a(48),w=a.n(v),x=(a(78),function(){return{type:"SEARCH_BEGIN"}}),j=function(){return{type:"SEARCH_END"}},O=function(e){return{type:"RESULTS_FETCHED",payload:e}},k=function(){return{type:"REFRESH_FETCHED"}},R=function(e){return{type:"RESULTS_FETCH_ERROR",payload:e}},C=a(20),S=a(49),N=a(21),_={searching:!1},H={results:[],fetched:!1,city:""},T=Object(C.c)({searchReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_;switch((arguments.length>1?arguments[1]:void 0).type){case"SEARCH_BEGIN":return Object(N.a)({},e,{searching:!0});case"SEARCH_END":return Object(N.a)({},e,{searching:!1});default:return e}},resultsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RESULTS_FETCHED":return Object(N.a)({},e,{results:t.payload,fetched:!0});case"REFRESH_FETCHED":return Object(N.a)({},e,{results:[],fetched:!1});case"RESULTS_FETCH_ERROR":return Object(N.a)({},e);default:return e}}}),L=Object(C.d)(T,Object(C.a)(S.a)),F=a(22),A=a(51),B=a(34),D=function(e){return r.a.createElement(B.Spring,{from:{opacity:0},to:{opacity:1}},function(t){return r.a.createElement("div",{style:t},e.children)})},I="https://developers.zomato.com/api/v2.1/",G="http://ip-api.com/json/",M=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={expand:!1,city:"",myCity:"",myCountry:"",lat:"",lon:"",error:null},a.toggle=Object(E.a)(y.a.mark(function e(){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,"";case 3:return e.t1=e.sent,e.next=6,!a.state.expand;case 6:e.t2=e.sent,e.t3={city:e.t1,expand:e.t2},e.t0.setState.call(e.t0,e.t3),a.state.expand?a.input.focus():console.log("yikes");case 10:case"end":return e.stop()}},e)})),a.handleChange=function(e){a.setState(Object(m.a)({},e.target.name,e.target.value))},a.getInputRef=function(e){a.input=e},a.getGeo=function(){var e=Object(E.a)(y.a.mark(function e(t){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("https://api.opencagedata.com/geocode/v1/json?q=".concat(t,"&key=11aea3522f8f433187c8ef0b28b1216f")).then(function(){var e=Object(E.a)(y.a.mark(function e(t){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.data.results.length>0)){e.next=10;break}return e.t0=a,e.next=4,t.data.results[0].geometry.lat;case 4:return e.t1=e.sent,e.next=7,t.data.results[0].geometry.lng;case 7:e.t2=e.sent,e.t3={lat:e.t1,lon:e.t2},e.t0.setState.call(e.t0,e.t3);case 10:return e.abrupt("return");case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.search=Object(E.a)(y.a.mark(function e(){var t,n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.dispatch(x());case 2:return e.next=4,L.dispatch(k());case 4:return e.t0=a,e.next=7,null;case 7:if(e.t1=e.sent,e.t2={error:e.t1},e.t0.setState.call(e.t0,e.t2),""===a.state.city){e.next=13;break}return e.next=13,a.getGeo(a.state.city);case 13:if(""!==a.state.city){e.next=16;break}return e.next=16,a.loadMyLocation();case 16:return t=I+"geocode?lat=".concat(a.state.lat,"&lon=").concat(a.state.lon),n={headers:{Accept:"application/json","user-key":"e688e4d8e1d70113d5723dcb5a2f514d"}},e.next=20,g.a.get(t,n).then(function(){var e=Object(E.a)(y.a.mark(function e(t){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.dispatch(O(t.data.nearby_restaurants));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(E.a)(y.a.mark(function e(t){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""===a.state.city){e.next=3;break}return a.setState({error:"Looks like ".concat(a.state.city," city is not supported yet. Try another city.")}),e.abrupt("return");case 3:return a.setState({error:"Seems like ".concat(a.state.myCity," city is not supported yet ;(. Try another city.")}),e.next=6,L.dispatch(R(t));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 20:return e.next=22,L.dispatch(j());case 22:case"end":return e.stop()}},e)})),a.loadMyLocation=Object(E.a)(y.a.mark(function e(){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get(G).then(function(){var e=Object(E.a)(y.a.mark(function e(t){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,t.data.city;case 3:return e.t1=e.sent,e.next=6,t.data.country;case 6:return e.t2=e.sent,e.next=9,t.data.lat;case 9:return e.t3=e.sent,e.next=12,t.data.lon;case 12:e.t4=e.sent,e.t5={myCity:e.t1,myCountry:e.t2,lat:e.t3,lon:e.t4},e.t0.setState.call(e.t0,e.t5);case 15:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){throw new Error(e)});case 2:case"end":return e.stop()}},e)})),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.loadMyLocation()}},{key:"render",value:function(){return r.a.createElement("div",{className:"container".concat(this.props.fetched?"-less":"")},r.a.createElement(D,null,r.a.createElement("h1",{className:"white home-title"},"Search for restaurants. Anywhere.")),r.a.createElement("div",{className:"search-contain"},r.a.createElement("img",{src:w.a,alt:"search button icon",onClick:this.toggle,id:"search-btn"}),r.a.createElement("input",{value:this.state.city,name:"city",autoComplete:"off",onChange:this.handleChange,ref:this.getInputRef,className:this.state.expand?"wide":"",type:"text",id:"search",placeholder:this.state.expand?"Enter city name":""}),r.a.createElement("div",{className:"bottom"},r.a.createElement("p",{className:this.state.expand?"tip-show":"tip-hide",id:"tip"},"By default, we will look for restaurants near you."),r.a.createElement("p",{id:"tip",onClick:this.search,className:this.state.expand?"tip-show search":"search tip-hide"},"Search"))),r.a.createElement("p",{className:"error".concat(this.state.error?"-show":"")},this.state.error),r.a.createElement("div",{className:"searching".concat(this.props.searching?"-show":"")},r.a.createElement(A.ClipLoader,{color:"rgb(131, 185, 202)"})))}}]),t}(n.Component),U=Object(F.b)(function(e){return{searching:e.searchReducer.searching,fetched:e.resultsReducer.fetched}})(M),W=(a(122),a(123),function(e){return r.a.createElement("a",{href:e.to,className:"restaurant"},r.a.createElement("div",{className:"r-image-wrapper"},r.a.createElement("img",{className:"r-image",src:e.img,alt:""})),r.a.createElement("p",{className:"r-name"},e.name))}),J=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"results".concat(this.props.fetched?"-show":"")},this.props.fetched?r.a.createElement("h1",{className:"results-title"},"Top Results: "):null,r.a.createElement("div",{className:"results-content"},this.props.results.map(function(e){return r.a.createElement(D,{key:e.restaurant.id},r.a.createElement(W,{to:e.restaurant.url,img:e.restaurant.featured_image||e.restaurant.thumb||e.restaurant.photos_url,name:e.restaurant.name}))})))}}]),t}(n.Component),q=Object(F.b)(function(e){return{searching:e.searchReducer.searching,fetched:e.resultsReducer.fetched,results:e.resultsReducer.results}})(J),z=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(U,null),r.a.createElement(q,null))}}]),t}(n.Component),$=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"global-wrapper center"},r.a.createElement("img",{src:"https://image.flaticon.com/icons/svg/1594/1594214.svg",className:"not-found-icon",alt:""}),r.a.createElement("h1",{className:"not-found-title"},"Whoopsie! Couldn't find this page ;("),r.a.createElement("a",{href:"/",className:"back-home"},"Back Home"))}}]),t}(n.Component);s.a.render(r.a.createElement(F.a,{store:L},r.a.createElement(o.a,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/",component:z}),r.a.createElement(i.a,{component:$})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},48:function(e,t,a){e.exports=a.p+"static/media/search_icon.64dee739.svg"},54:function(e,t,a){e.exports=a(125)},59:function(e,t,a){},78:function(e,t,a){}},[[54,1,2]]]);
//# sourceMappingURL=main.77c9696f.chunk.js.map